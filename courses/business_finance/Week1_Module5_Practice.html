<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Week 1 - Module 5: Fisher Separation Theorem (Mock Exam)</title>
    <style>
        :root {
            --primary-navy: #0b2447;
            --secondary-blue: #19376d;
            --accent-gold: #dca743;
            --accent-gold-hover: #c69539;
            --accent-red: #c0392b;
            --accent-green: #27ae60;
            --bg-light: #f4f7f6;
            --box-bg: #ffffff;
            --text-dark: #333333;
            --border-radius: 8px;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            background-color: var(--bg-light);
            margin: 0;
            padding: 20px;
        }

       .container {
            max-width: 950px;
            margin: 0 auto;
            background-color: var(--box-bg);
            padding: 40px 50px;
            border-radius: var(--border-radius);
            box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            position: relative;
        }

        /* Language Toggle Button */
       .toggle-btn {
            display: block;
            margin: 0 auto 40px auto;
            background-color: var(--primary-navy);
            color: white;
            border: none;
            padding: 12px 28px;
            font-size: 1.05rem;
            font-weight: 600;
            cursor: pointer;
            border-radius: 30px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

       .toggle-btn:hover {
            background-color: var(--secondary-blue);
            transform: translateY(-2px);
        }

        /* Responsive Title */
        h1 {
            color: var(--primary-navy);
            text-align: center;
            font-size: clamp(1.8rem, 4vw, 2.8rem);
            margin-top: 0;
            margin-bottom: 10px;
            line-height: 1.3;
        }

       .subtitle {
            text-align: center;
            color: #5a6b82;
            font-size: clamp(1.1rem, 2.5vw, 1.5rem);
            font-weight: 600;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid var(--primary-navy);
        }

        /* Intro Box */
       .quiz-intro {
            background-color: #f1f5f9;
            padding: 25px;
            border-radius: 6px;
            margin-bottom: 35px;
            border-left: 6px solid var(--primary-navy);
            color: #334155;
            font-size: 1.05rem;
        }

       .quiz-intro strong {
            color: var(--primary-navy);
        }

        /* Quiz Styles */
       .question-card {
            background-color: #ffffff;
            border: 1px solid #e2e8f0;
            padding: 25px;
            margin-bottom: 25px;
            border-radius: var(--border-radius);
            transition: box-shadow 0.2s ease;
        }

       .question-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.06);
        }

       .question-text {
            font-weight: 600;
            font-size: 1.15rem;
            margin-bottom: 15px;
            color: var(--primary-navy);
        }

       .options-list {
            list-style-type: none;
            padding: 0;
        }

       .options-list li {
            margin-bottom: 12px;
        }

       .options-list label {
            display: flex;
            align-items: flex-start;
            cursor: pointer;
            padding: 12px 15px;
            border-radius: 6px;
            border: 1px solid transparent;
            transition: all 0.2s ease;
            background-color: #f8fafc;
        }

       .options-list label:hover {
            background-color: #e2e8f0;
            border-color: #cbd5e1;
        }

       .options-list input[type="radio"] {
            margin-top: 6px;
            margin-right: 12px;
            cursor: pointer;
            transform: scale(1.2);
        }

        /* Submit Button */
       .submit-btn {
            background-color: var(--accent-gold);
            color: var(--primary-navy);
            border: none;
            padding: 18px 30px;
            font-size: 1.25rem;
            font-weight: 700;
            cursor: pointer;
            border-radius: 6px;
            display: block;
            width: 100%;
            margin: 40px 0;
            transition: background-color 0.3s ease;
        }

       .submit-btn:hover {
            background-color: var(--accent-gold-hover);
        }

       .submit-btn:disabled {
            background-color: #cbd5e1;
            cursor: not-allowed;
            color: #64748b;
        }

        /* Results & Mistake Book */
        #results-container {
            display: none;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px dashed #cbd5e1;
        }

       .score-display {
            text-align: center;
            font-size: 2.2rem;
            font-weight: 800;
            color: var(--primary-navy);
            margin-bottom: 30px;
            padding: 25px;
            background-color: #fdfaf2;
            border-radius: var(--border-radius);
            border: 2px solid var(--accent-gold);
        }

       .mistake-book {
            background-color: #fff5f5;
            border: 1px solid #f5cccc;
            border-left: 6px solid var(--accent-red);
            padding: 30px;
            border-radius: var(--border-radius);
            margin-top: 30px;
        }

       .mistake-card {
            background-color: #ffffff;
            border: 1px solid #e2e8f0;
            padding: 25px;
            margin-bottom: 20px;
            border-radius: 6px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.03);
        }

       .correct-ans-highlight { color: var(--accent-green); font-weight: bold; background-color: #e8f8f5; padding: 2px 6px; border-radius: 4px;}
       .wrong-ans-highlight { color: var(--accent-red); font-weight: bold; text-decoration: line-through; background-color: #fdedec; padding: 2px 6px; border-radius: 4px;}
        
       .explanation-box {
            background-color: #eff6ff;
            padding: 18px;
            margin-top: 20px;
            border-left: 4px solid var(--secondary-blue);
            font-size: 0.95rem;
            border-radius: 0 6px 6px 0;
        }

       .attribution-box {
            background-color: #fef2f2;
            padding: 18px;
            margin-top: 12px;
            border-left: 4px solid var(--accent-red);
            font-size: 0.95rem;
            border-radius: 0 6px 6px 0;
        }

        /* Bottom Navigation Area */
       .bottom-nav-container {
            margin-top: 60px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

       .dashed-divider {
            border-top: 1.5px dashed #cbd5e1;
            width: 100%;
            margin-bottom: 25px;
        }

       .back-to-top {
            background-color: #f0f2f5;
            color: var(--primary-navy);
            border: 1px solid #cbd5e1;
            padding: 10px 20px;
            border-radius: 4px;
            font-weight: 700;
            font-size: 0.95rem;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            text-decoration: none;
        }

       .back-to-top:hover {
            background-color: #e2e8f0;
        }

        /* CSS based Language Display Logic */
        body.lang-en .zh { display: none!important; }
        body.lang-zh .en { display: none!important; }
    </style>
</head>
<body class="lang-en">

<div class="container">
    <button id="langToggleBtn" class="toggle-btn" onclick="toggleLanguage()">ç‚¹å‡»åˆ‡æ¢è‡³å…¨ä¸­æ–‡ (åˆ‡æ¢è‡³ä¸­æ–‡)</button>

    <h1 class="en">Week 1 - Module 5: Fisher Separation Theorem</h1>
    <h1 class="zh">ç¬¬ä¸€å‘¨ - æ¨¡å— 5: è´¹é›ªåˆ†ç¦»å®šç†</h1>
    
    <div class="subtitle en">Mock Exam & Error Attribution Framework</div>
    <div class="subtitle zh">æ¨¡æ‹Ÿè€ƒè¯•åŠé”™è¯¯å½’å› æ¡†æ¶</div>

    <div class="quiz-intro en">
        <p><strong>Professor's Instructions:</strong> Welcome to your Module 5 rigorous assessment. To achieve a Distinction (A+) in the BUSI1020 final exam, you must demonstrate a profound understanding of the Fisher Separation Theorem. You must be able to evaluate the assumptions of perfect capital markets and understand how managers can objectively maximize shareholder wealth without consulting individual subjective consumption preferences. Complete the 10 questions below to generate your <em>Error Attribution Analysis</em>.</p>
    </div>
    <div class="quiz-intro zh">
        <p><strong>æ•™æˆæŒ‡ç¤º:</strong> æ¬¢è¿æ¥åˆ°æ¨¡å— 5 çš„ä¸¥æ ¼è€ƒæ ¸ã€‚è¦æƒ³åœ¨ BUSI1020 æœŸæœ«è€ƒè¯•ä¸­è·å¾—ä¼˜å¼‚æˆç»©ï¼ˆA+ï¼‰ï¼Œæ‚¨å¿…é¡»å±•ç°å‡ºå¯¹â€œè´¹é›ªåˆ†ç¦»å®šç†â€çš„æ·±åˆ»ç†è§£ã€‚æ‚¨å¿…é¡»èƒ½å¤Ÿè¯„ä¼°å®Œç¾èµ„æœ¬å¸‚åœºçš„å‡è®¾ï¼Œå¹¶ç†è§£ç®¡ç†è€…ä¸ºä½•èƒ½å¤Ÿåœ¨ä¸å’¨è¯¢ä¸ªäººä¸»è§‚æ¶ˆè´¹åå¥½çš„æƒ…å†µä¸‹ï¼Œå®¢è§‚åœ°æœ€å¤§åŒ–è‚¡ä¸œè´¢å¯Œã€‚è¯·å®Œæˆä»¥ä¸‹10é“é¢˜ä»¥ç”Ÿæˆæ‚¨çš„<em>é”™è¯¯å½’å› åˆ†æ</em>ã€‚</p>
    </div>

    <form id="quiz-form">
        <div id="questions-container"></div>
        
        <button type="button" id="submitBtn" class="submit-btn en" onclick="submitQuiz()">Submit Answers & Generate Analysis</button>
        <button type="button" id="submitBtnZh" class="submit-btn zh" onclick="submitQuiz()">æäº¤ç­”æ¡ˆå¹¶ç”Ÿæˆåˆ†æ</button>
    </form>

    <div id="results-container">
        <div class="score-display">
            <span class="en">Your Score: <span id="score-val-en"></span> / 10</span>
            <span class="zh">æ‚¨çš„å¾—åˆ†ï¼š<span id="score-val-zh"></span> / 10</span>
        </div>
        
        <div id="mistake-book-section" class="mistake-book">
            <h2 class="en" style="color: var(--accent-red); margin-top:0;">ğŸ“– Personal Mistake Book</h2>
            <h2 class="zh" style="color: var(--accent-red); margin-top:0;">ğŸ“– ä¸ªäººé”™è¯¯ç°¿ä¸å½’å› åˆ†æ</h2>
            <p class="en">Review the questions you answered incorrectly below. The attribution framework explains the root cause of your error to prevent it in the final exam.</p>
            <p class="zh">è¯·ä»”ç»†å›é¡¾ä¸‹æ–¹æ‚¨åšé”™çš„é¢˜ç›®ã€‚å½’å› åˆ†ææ¡†æ¶å°†å¸®æ‚¨å½»åº•æŒ–å‡ºé”™è¯¯çš„åº•å±‚é€»è¾‘æ ¹æºï¼Œç¡®ä¿åœ¨æœŸæœ«è€ƒåœºä¸Šç»ä¸é‡çŠ¯ã€‚</p>
            <div id="mistakes-container"></div>
        </div>

        <div id="perfect-score-section" style="display:none; text-align:center; padding: 20px;">
            <h2 class="en" style="color: var(--accent-green);">ğŸŒŸ Exceptional! Class I Quality!</h2>
            <p class="en">You achieved a perfect score. You have demonstrated a Distinction-level understanding of the Fisher Separation Theorem.</p>
            <h2 class="zh" style="color: var(--accent-green);">ğŸŒŸ æ»¡åˆ†å“è¶Šè¡¨ç°ï¼(Distinction)</h2>
            <p class="zh">æ‚¨è·å¾—äº†æ»¡åˆ†ã€‚æ‚¨å·²ç»å±•ç°å‡ºäº†è¾¾åˆ° A+ (Distinction) çº§åˆ«çš„å¯¹è´¹é›ªå®šç†çš„æ‰å®ç†è§£ï¼è¯·ç»§ç»­ä¿æŒï¼</p>
        </div>
    </div>

    <div class="bottom-nav-container">
        <div class="dashed-divider"></div>
        <button class="back-to-top" onclick="window.scrollTo({top: 0, behavior: 'smooth'})">â†‘ Back to Top</button>
    </div>
</div>

<script>
    // Robust 10-question array with A+ level difficulty covering Fisher Separation Theorem
    const quizData = [
        {
            id: 1,
            qEn: "What is the core insight of the Fisher Separation Theorem?",
            qZh: "è´¹é›ªåˆ†ç¦»å®šç†çš„æ ¸å¿ƒæ´è§æ˜¯ä»€ä¹ˆï¼Ÿ",
            optionsEn: [
                "Managers must survey to determine shareholders' time preference for consumption.",
                "The firm's investment decision is completely independent of its shareholders' consumption preferences.",
                "The firm should separate its debt holders from its equity holders.",
                "Managers must only invest in short-term projects to meet immediate consumption needs."
            ],
            optionsZh: [
                "ç®¡ç†è€…å¿…é¡»è¿›è¡Œè°ƒæŸ¥ä»¥ç¡®å®šè‚¡ä¸œå¯¹æ¶ˆè´¹çš„æ—¶é—´åå¥½ã€‚",
                "ä¼ä¸šçš„æŠ•èµ„å†³ç­–å®Œå…¨ç‹¬ç«‹äºå…¶è‚¡ä¸œçš„æ¶ˆè´¹åå¥½ã€‚",
                "ä¼ä¸šåº”è¯¥å°†å…¶å€ºåŠ¡æŒæœ‰äººä¸è‚¡æƒæŒæœ‰äººåˆ†ç¦»å¼€æ¥ã€‚",
                "ç®¡ç†è€…å¿…é¡»åªæŠ•èµ„äºçŸ­æœŸé¡¹ç›®ï¼Œä»¥æ»¡è¶³å³æ—¶çš„æ¶ˆè´¹éœ€æ±‚ã€‚"
            ],
            correct: 1,
            expEn: "The Fisher Separation Theorem proves that in perfect capital markets, the firm's optimal production/investment decision is made solely to maximize Net Present Value (NPV), completely separating it from the subjective consumption preferences of the owners.",
            expZh: "è´¹é›ªåˆ†ç¦»å®šç†è¯æ˜ï¼Œåœ¨å®Œç¾çš„èµ„æœ¬å¸‚åœºä¸­ï¼Œä¼ä¸šæœ€ä¼˜çš„ç”Ÿäº§/æŠ•èµ„å†³ç­–ä»…ä»…æ˜¯ä¸ºäº†æœ€å¤§åŒ–å‡€ç°å€¼ï¼ˆNPVï¼‰ï¼Œè¿™ä¸å…¶æ‰€æœ‰è€…ä¸»è§‚çš„æ¶ˆè´¹åå¥½å®Œå…¨åˆ†ç¦»ã€‚",
            attrEn: "Definitional Error. You failed to grasp the core of the theorem: the absolute separation of objective firm investment from subjective shareholder consumption.",
            attrZh: "ç†è®ºå®šä¹‰é”™è¯¯ã€‚æ‚¨æœªèƒ½æŒæ¡è¯¥å®šç†çš„æ ¸å¿ƒï¼šå®¢è§‚çš„ä¼ä¸šæŠ•èµ„ä¸ä¸»è§‚çš„è‚¡ä¸œæ¶ˆè´¹ä¹‹é—´çš„ç»å¯¹åˆ†ç¦»ã€‚"
        },
        {
            id: 2,
            qEn: "Which of the following is a strict ASSUMPTION required for the Fisher Separation Theorem to hold true?",
            qZh: "ä»¥ä¸‹å“ªä¸€é¡¹æ˜¯ä½¿è´¹é›ªåˆ†ç¦»å®šç†æˆç«‹çš„ä¸¥æ ¼ã€å‰æå‡è®¾ã€‘ï¼Ÿ",
            optionsEn: [
                "Information asymmetry exists between managers and shareholders.",
                "Corporate tax rate must be higher than individual tax rate.",
                "Perfect capital markets where borrowing rate equals lending rate.",
                "Investors must be irrational and prone to behavioral biases."
            ],
            optionsZh: [
                "ç®¡ç†è€…å’Œè‚¡ä¸œä¹‹é—´å­˜åœ¨ä¿¡æ¯ä¸å¯¹ç§°ã€‚",
                "ä¼ä¸šç¨ç‡å¿…é¡»é«˜äºä¸ªäººç¨ç‡ã€‚",
                "å®Œç¾çš„èµ„æœ¬å¸‚åœºï¼Œä¸”å€Ÿæ¬¾åˆ©ç‡ç­‰äºè´·æ¬¾åˆ©ç‡ã€‚",
                "æŠ•èµ„è€…å¿…é¡»æ˜¯éç†æ€§çš„ï¼Œä¸”å®¹æ˜“äº§ç”Ÿè¡Œä¸ºåå·®ã€‚"
            ],
            correct: 2,
            expEn: "The theorem relies on 'perfect capital markets'. A key component of this is that individuals and firms can borrow and lend unlimited amounts at the exact same risk-free interest rate, with no transaction costs or taxes.",
            expZh: "è¯¥å®šç†ä¾èµ–äºã€Œå®Œç¾çš„èµ„æœ¬å¸‚åœºã€ã€‚å…¶ä¸­çš„ä¸€ä¸ªå…³é”®ç»„æˆéƒ¨åˆ†æ˜¯ï¼šä¸ªäººå’Œä¼ä¸šå¯ä»¥ä»¥å®Œå…¨ç›¸åŒä¸”æ— é£é™©çš„åˆ©ç‡æ— é™åˆ¶åœ°å€Ÿè´·ï¼Œä¸”æ²¡æœ‰äº¤æ˜“æˆæœ¬æˆ–ç¨æ”¶ã€‚",
            attrEn: "Condition/Assumption Error. Theorems in finance are bound by their assumptions. A difference in borrowing and lending rates (market friction) destroys the separation principle.",
            attrZh: "å‰æå‡è®¾ç±»é”™è¯¯ã€‚é‡‘èå­¦ä¸­çš„å®šç†å—å…¶å‡è®¾æ¡ä»¶çš„çº¦æŸã€‚å€Ÿè´·åˆ©ç‡å·®å¼‚ï¼ˆå¸‚åœºæ‘©æ“¦ï¼‰ä¼šç›´æ¥ç ´ååˆ†ç¦»åŸåˆ™ã€‚"
        },
        {
            id: 3,
            qEn: "Shareholder A wants immediate cash. Shareholder B wants to delay consumption for 10 years. The CEO identifies a project with a positive NPV (+Â£5m). According to Fisher's theorem, what should the CEO do?",
            qZh: "è‚¡ä¸œAæƒ³è¦å³æ—¶ç°é‡‘ã€‚è‚¡ä¸œBæƒ³æŠŠæ¶ˆè´¹æ¨è¿Ÿ10å¹´ã€‚CEOå‘ç°äº†ä¸€ä¸ªæ­£å‡€ç°å€¼ (+500ä¸‡è‹±é•‘) çš„é¡¹ç›®ã€‚æ ¹æ®è´¹é›ªå®šç†ï¼ŒCEOåº”è¯¥æ€ä¹ˆåšï¼Ÿ",
            optionsEn: [
                "Reject the project because shareholders have different preferences.",
                "Accept the project (maximize NPV). The capital market allows shareholders to adjust consumption timing independently.",
                "Ask shareholders to vote on which projects to undertake.",
                "Conduct a survey to determine the majority preference and decide accordingly."
            ],
            optionsZh: [
                "æ‹’ç»è¯¥é¡¹ç›®ï¼Œå› ä¸ºè‚¡ä¸œæœ‰ä¸åŒçš„åå¥½ã€‚",
                "æ¥å—è¯¥é¡¹ç›®ï¼ˆæœ€å¤§åŒ– NPVï¼‰ã€‚èµ„æœ¬å¸‚åœºå…è®¸è‚¡ä¸œç‹¬ç«‹åœ°è°ƒæ•´æ¶ˆè´¹æ—¶é—´ã€‚",
                "è¦æ±‚è‚¡ä¸œæŠ•ç¥¨å†³å®šè¿›è¡Œå“ªäº›é¡¹ç›®ã€‚",
                "è¿›è¡Œè°ƒæŸ¥ä»¥ç¡®å®šå¤§å¤šæ•°è‚¡ä¸œçš„åå¥½ï¼Œç„¶åæ®æ­¤å†³å®šã€‚"
            ],
            correct: 1,
            expEn: "Because NPV is positive, the firm's value increases. The CEO accepts the project. Shareholder A can sell shares or borrow against their increased wealth in the capital market for immediate cash. Shareholder B enjoys the deferred capital gain. The market acts as the shock absorber.",
            expZh: "å› ä¸º NPV ä¸ºæ­£ï¼Œå…¬å¸ä»·å€¼å¢åŠ ã€‚CEOåº”æ¥å—è¯¥é¡¹ç›®ã€‚è‚¡ä¸œAå¯ä»¥åœ¨èµ„æœ¬å¸‚åœºä¸Šå–å‡ºè‚¡ç¥¨æˆ–æŠµæŠ¼å…¶å¢åŠ çš„è´¢å¯Œå€Ÿæ¬¾ä»¥è·å–å³æ—¶ç°é‡‘ã€‚è‚¡ä¸œBåˆ™äº«å—å»¶è¿Ÿçš„èµ„æœ¬åˆ©å¾—ã€‚å¸‚åœºå……å½“äº†å‡éœ‡å™¨ã€‚",
            attrEn: "Application Error. You missed how the capital market provides the mechanism for individuals to adjust their consumption timing, freeing the CEO to solely focus on maximizing firm value.",
            attrZh: "åº”ç”¨ç±»é”™è¯¯ã€‚æ‚¨å¿½ç•¥äº†èµ„æœ¬å¸‚åœºæ˜¯å¦‚ä½•ä¸ºä¸ªäººæä¾›è°ƒæ•´æ¶ˆè´¹æ—¶é—´æœºåˆ¶çš„ï¼Œä»è€Œå°† CEO è§£æ”¾å‡ºæ¥ï¼Œä½¿å…¶åªéœ€ä¸“æ³¨äºæœ€å¤§åŒ–å…¬å¸ä»·å€¼ã€‚"
        },
        {
            id: 4,
            qEn: "In the context of the Fisher Separation Theorem, how is the 'optimal investment decision' graphically determined?",
            qZh: "åœ¨è´¹é›ªåˆ†ç¦»å®šç†çš„èƒŒæ™¯ä¸‹ï¼Œã€Œæœ€ä¼˜æŠ•èµ„å†³ç­–ã€åœ¨å›¾å½¢ä¸Šæ˜¯å¦‚ä½•ç¡®å®šçš„ï¼Ÿ",
            optionsEn: [
                "Where the shareholder's highest indifference curve meets the y-axis.",
                "Where the firm's Production Possibility Frontier (PPF) meets the x-axis.",
                "Where the PPF is tangent to the Capital Market Line (borrow/lend rate line).",
                "Where the PPF is tangent to the shareholder's indifference curve."
            ],
            optionsZh: [
                "åœ¨è‚¡ä¸œæœ€é«˜æ— å·®å¼‚æ›²çº¿ä¸ y è½´ç›¸äº¤çš„åœ°æ–¹ã€‚",
                "åœ¨ä¼ä¸šç”Ÿäº§å¯èƒ½æ€§è¾¹ç•Œ (PPF) ä¸ x è½´ç›¸äº¤çš„åœ°æ–¹ã€‚",
                "åœ¨ç”Ÿäº§å¯èƒ½æ€§è¾¹ç•Œ (PPF) ä¸èµ„æœ¬å¸‚åœºçº¿ï¼ˆå€Ÿ/è´·åˆ©ç‡çº¿ï¼‰ç›¸åˆ‡çš„ç‚¹ã€‚",
                "åœ¨ PPF ä¸è‚¡ä¸œçš„æ— å·®å¼‚æ›²çº¿ç›¸åˆ‡çš„ç‚¹ã€‚"
            ],
            correct: 2,
            expEn: "Optimal investment occurs where the marginal rate of return on investment (slope of PPF) exactly equals the market interest rate (slope of the Capital Market Line). Tangency with the indifference curve happens LATER, during the individual's consumption decision.",
            expZh: "æœ€ä¼˜æŠ•èµ„å‘ç”Ÿåœ¨æŠ•èµ„çš„è¾¹é™…å›æŠ¥ç‡ï¼ˆPPF çš„æ–œç‡ï¼‰å®Œå…¨ç­‰äºå¸‚åœºåˆ©ç‡ï¼ˆèµ„æœ¬å¸‚åœºçº¿çš„æ–œç‡ï¼‰çš„åœ°æ–¹ã€‚ä¸æ— å·®å¼‚æ›²çº¿ç›¸åˆ‡å‘ç”Ÿåœ¨ã€ä¹‹åã€‘ä¸ªäººçš„æ¶ˆè´¹å†³ç­–é˜¶æ®µã€‚",
            attrEn: "Graphical/Theoretical Error. You confused the firm's objective decision (PPF tangent to Market Line) with the shareholder's subjective decision (Market Line tangent to Indifference Curve).",
            attrZh: "å›¾å½¢/ç†è®ºæ··æ·†é”™è¯¯ã€‚æ‚¨å°†ä¼ä¸šçš„å®¢è§‚å†³ç­–ï¼ˆPPF ä¸å¸‚åœºçº¿ç›¸åˆ‡ï¼‰ä¸è‚¡ä¸œçš„ä¸»è§‚å†³ç­–ï¼ˆå¸‚åœºçº¿ä¸æ— å·®å¼‚æ›²çº¿ç›¸åˆ‡ï¼‰æ··æ·†äº†ã€‚"
        },
        {
            id: 5,
            qEn: "What happens to the Fisher Separation Theorem if Capital Markets are highly IMPERFECT (e.g., borrowing rates are much higher than lending rates)?",
            qZh: "å¦‚æœèµ„æœ¬å¸‚åœºé«˜åº¦ä¸å®Œç¾ï¼ˆä¾‹å¦‚ï¼Œå€Ÿæ¬¾åˆ©ç‡è¿œé«˜äºè´·æ¬¾åˆ©ç‡ï¼‰ï¼Œè´¹é›ªåˆ†ç¦»å®šç†ä¼šæ€æ ·ï¼Ÿ",
            optionsEn: [
                "The theorem becomes even more accurate.",
                "The theorem collapses; managers now must understand shareholders' specific utility curves and time preferences to make optimal decisions.",
                "The firm should change its objective from wealth maximization to profit maximization.",
                "Shareholders will immediately launch a hostile takeover."
            ],
            optionsZh: [
                "å®šç†ä¼šå˜å¾—æ›´åŠ å‡†ç¡®ã€‚",
                "å®šç†å´©æºƒï¼›ç®¡ç†è€…ç°åœ¨å¿…é¡»äº†è§£å…¶è‚¡ä¸œå…·ä½“çš„æ•ˆç”¨æ›²çº¿å’Œæ—¶é—´åå¥½ï¼Œæ‰èƒ½åšå‡ºæœ€ä¼˜å†³ç­–ã€‚",
                "ä¼ä¸šåº”å°†å…¶ç›®æ ‡ä»è´¢å¯Œæœ€å¤§åŒ–è½¬å˜ä¸ºåˆ©æ¶¦æœ€å¤§åŒ–ã€‚",
                "è‚¡ä¸œå°†ç«‹å³å‘èµ·æ•Œæ„æ”¶è´­ã€‚"
            ],
            correct: 1,
            expEn: "When market frictions exist (like different borrow/lend rates), the Capital Market Line is 'kinked'. The firm can no longer blindly maximize NPV. The optimal investment point will now depend on the specific shape of the shareholders' indifference curves.",
            expZh: "å½“å¸‚åœºæ‘©æ“¦å­˜åœ¨æ—¶ï¼ˆå¦‚å€Ÿè´·åˆ©ç‡ä¸åŒï¼‰ï¼Œèµ„æœ¬å¸‚åœºçº¿ä¼šã€Œå¼¯æŠ˜ã€ã€‚ä¼ä¸šä¸å†èƒ½ç›²ç›®æœ€å¤§åŒ– NPVã€‚æ­¤æ—¶çš„æœ€ä¼˜æŠ•èµ„ç‚¹å°†å–å†³äºè‚¡ä¸œæ— å·®å¼‚æ›²çº¿çš„å…·ä½“å½¢çŠ¶ã€‚",
            attrEn: "Critical Limitations Error. An A+ student must know when theories fail. Imperfect markets destroy the separation, re-linking investment decisions back to owner preferences.",
            attrZh: "å®šç†å±€é™æ€§è®¤çŸ¥é”™è¯¯ã€‚A+ å­¦ç”Ÿå¿…é¡»çŸ¥é“ç†è®ºä½•æ—¶ä¼šå¤±æ•ˆã€‚ä¸å®Œç¾çš„å¸‚åœºç ´åäº†åˆ†ç¦»åŸåˆ™ï¼Œå°†æŠ•èµ„å†³ç­–é‡æ–°ä¸æ‰€æœ‰è€…åå¥½æŒ‚é’©ã€‚"
        },
        {
            id: 6,
            qEn: "From a corporate governance perspective, why is the Fisher Separation Theorem fundamentally important to modern public corporations?",
            qZh: "ä»å…¬å¸æ²»ç†çš„è§’åº¦æ¥çœ‹ï¼Œä¸ºä»€ä¹ˆè´¹é›ªåˆ†ç¦»å®šç†å¯¹ç°ä»£ä¸Šå¸‚å…¬ä¼—å…¬å¸å…·æœ‰æ ¹æœ¬æ€§çš„é‡è¦æ„ä¹‰ï¼Ÿ",
            optionsEn: [
                "It proves that managers can never be trusted.",
                "It legally forbids shareholders from voting at the AGM.",
                "It provides the theoretical justification for delegating decision-making to professional managers, as they share a single objective rule (Max NPV) that benefits all shareholders.",
                "It eliminates the need for external auditors."
            ],
            optionsZh: [
                "å®ƒè¯æ˜äº†ç®¡ç†è€…æ°¸è¿œä¸å¯ä¿¡ã€‚",
                "å®ƒåœ¨æ³•å¾‹ä¸Šç¦æ­¢è‚¡ä¸œåœ¨å¹´åº¦è‚¡ä¸œå¤§ä¼šä¸ŠæŠ•ç¥¨ã€‚",
                "å®ƒä¸ºâ€œå°†å†³ç­–æƒå§”æ‰˜ç»™èŒä¸šç»ç†äººâ€æä¾›äº†ç†è®ºä¸Šçš„åˆæ³•æ€§ï¼Œå› ä¸ºä»–ä»¬éµå¾ªä¸€ä¸ªèƒ½ä½¿æ‰€æœ‰è‚¡ä¸œå—ç›Šçš„å•ä¸€å®¢è§‚æ³•åˆ™ï¼ˆæœ€å¤§åŒ– NPVï¼‰ã€‚",
                "å®ƒæ¶ˆé™¤äº†å¯¹å¤–éƒ¨å®¡è®¡å¸ˆçš„éœ€æ±‚ã€‚"
            ],
            correct: 2,
            expEn: "Because the investment decision is separated from diverse consumption desires, managers have a clear, objective mandate: maximize market value. This justifies the entire structure of separating ownership from daily management.",
            expZh: "å› ä¸ºæŠ•èµ„å†³ç­–ä¸å¤šæ ·åŒ–çš„æ¶ˆè´¹æ¬²æœ›åˆ†ç¦»å¼€äº†ï¼Œç®¡ç†è€…æœ‰äº†ä¸€ä¸ªæ˜ç¡®ã€å®¢è§‚çš„ä½¿å‘½ï¼šæœ€å¤§åŒ–å¸‚åœºä»·å€¼ã€‚è¿™å°±ä¸ºâ€œæ‰€æœ‰æƒä¸æ—¥å¸¸ç»è¥æƒåˆ†ç¦»â€çš„æ•´ä¸ªä¼ä¸šç»“æ„æä¾›äº†åˆç†æ€§ã€‚",
            attrEn: "Synthesis Error. You failed to connect microeconomic theory (Fisher) to the broader macro-structure of corporate governance (Separation of Ownership and Control).",
            attrZh: "çŸ¥è¯†ç»¼åˆé”™è¯¯ã€‚æ‚¨æœªèƒ½å°†å¾®è§‚ç»æµç†è®ºï¼ˆè´¹é›ªï¼‰ä¸å…¬å¸æ²»ç†çš„å®è§‚ç»“æ„ï¼ˆæ‰€æœ‰æƒä¸æ§åˆ¶æƒåˆ†ç¦»ï¼‰è”ç³»èµ·æ¥ã€‚"
        },
        {
            id: 7,
            qEn: "Which investment appraisal technique is mathematically justified and underpinned by the Fisher Separation Theorem?",
            qZh: "å“ªä¸€ç§æŠ•èµ„è¯„ä¼°æŠ€æœ¯åœ¨æ•°å­¦ä¸Šå¾—åˆ°äº†è´¹é›ªåˆ†ç¦»å®šç†çš„æ”¯æŒå’Œè¯æ˜ï¼Ÿ",
            optionsEn: [
                "Payback Period Method.",
                "Internal Rate of Return (IRR) method.",
                "Net Present Value (NPV) method.",
                "Accounting Rate of Return (ARR)."
            ],
            optionsZh: [
                "å›æ”¶æœŸæ³•ã€‚",
                "å†…éƒ¨æ”¶ç›Šç‡ (IRR) æ³•ã€‚",
                "å‡€ç°å€¼ (NPV) æ³•ã€‚",
                "ä¼šè®¡æ”¶ç›Šç‡ (ARR) æ³•ã€‚"
            ],
            correct: 2,
            expEn: "Fisher's theorem mathematically proves that maximizing the present value of the firm's production opportunities (which is exactly what the NPV rule does) is the universally optimal strategy for wealth maximization.",
            expZh: "è´¹é›ªå®šç†åœ¨æ•°å­¦ä¸Šè¯æ˜äº†ï¼Œæœ€å¤§åŒ–ä¼ä¸šç”Ÿäº§æœºä¼šçš„ç°å€¼ï¼ˆè¿™æ­£æ˜¯ NPV æ³•åˆ™æ‰€åšçš„ï¼‰æ˜¯å®ç°è´¢å¯Œæœ€å¤§åŒ–çš„æ™®éæœ€ä¼˜ç­–ç•¥ã€‚",
            attrEn: "Linkage Error. Fisher = NPV. The theorem proves why discounting cash flows at the market opportunity rate yields the objectively 'best' decision.",
            attrZh: "è€ƒç‚¹å…³è”é”™è¯¯ã€‚è´¹é›ªå®šç† = NPV æ³•åˆ™ã€‚è¯¥å®šç†è¯æ˜äº†ä¸ºä»€ä¹ˆä»¥å¸‚åœºæœºä¼šæˆæœ¬å¯¹ç°é‡‘æµè¿›è¡ŒæŠ˜ç°ï¼Œèƒ½å¾—å‡ºå®¢è§‚ä¸Šã€Œæœ€å¥½ã€çš„å†³ç­–ã€‚"
        },
        {
            id: 8,
            qEn: "According to Fisher, the value of an investment project is completely independent of:",
            qZh: "æ ¹æ®è´¹é›ªçš„ç†è®ºï¼Œä¸€ä¸ªæŠ•èµ„é¡¹ç›®çš„ä»·å€¼å®Œå…¨ç‹¬ç«‹äºï¼š",
            optionsEn: [
                "When its cash flows occur.",
                "The magnitude of its cash flows.",
                "How it is financed (the mix of debt, equity, or retained earnings used).",
                "The market interest rate."
            ],
            optionsZh: [
                "å…¶ç°é‡‘æµå‘ç”Ÿçš„æ—¶é—´ã€‚",
                "å…¶ç°é‡‘æµçš„è§„æ¨¡ã€‚",
                "ç”¨äºä¸ºå…¶èèµ„çš„æ–¹å¼ï¼ˆå€ºåŠ¡ã€è‚¡æƒæˆ–ç•™å­˜æ”¶ç›Šçš„æ··åˆæ¯”ä¾‹ï¼‰ã€‚",
                "å¸‚åœºåˆ©ç‡ã€‚"
            ],
            correct: 2,
            expEn: "Fisher established that the investment decision is separate from the financing decision. The value of the project is based solely on its own cash flows discounted at the market rate, regardless of how the firm raises the money.",
            expZh: "è´¹é›ªç¡®ç«‹äº†ã€ŒæŠ•èµ„å†³ç­–ç‹¬ç«‹äºèèµ„å†³ç­–ã€çš„åŸåˆ™ã€‚é¡¹ç›®çš„ä»·å€¼ä»…ä»…åŸºäºå…¶è‡ªèº«çš„ç°é‡‘æµæŒ‰å¸‚åœºåˆ©ç‡æŠ˜ç°ï¼Œè€Œä¸ä¼ä¸šå¦‚ä½•ç­¹é›†è¿™ç¬”èµ„é‡‘æ— å…³ã€‚",
            attrEn: "Conceptual Error. A core tenet of separation is that Investment Policy is independent of Financing Policy in perfect markets.",
            attrZh: "æ ¸å¿ƒæ¦‚å¿µé”™è¯¯ã€‚åˆ†ç¦»å®šç†çš„ä¸€ä¸ªæ ¸å¿ƒåŸåˆ™æ˜¯ï¼šåœ¨å®Œç¾çš„å¸‚åœºä¸­ï¼ŒæŠ•èµ„æ”¿ç­–ç‹¬ç«‹äºèèµ„æ”¿ç­–ã€‚"
        },
        {
            id: 9,
            qEn: "Consider a 2-period Fisher model graph. A shareholder's 'Initial Endowment' (wealth before any investment) is located on the x-axis. After the firm invests optimally, the new 'Present Value of Wealth' point on the x-axis will be:",
            qZh: "è€ƒè™‘ä¸€ä¸ª2æœŸçš„è´¹é›ªæ¨¡å‹å›¾ã€‚è‚¡ä¸œçš„ã€Œåˆå§‹ç¦€èµ‹ã€ï¼ˆæŠ•èµ„å‰çš„è´¢å¯Œï¼‰ä½äºxè½´ä¸Šã€‚åœ¨ä¼ä¸šè¿›è¡Œæœ€ä¼˜æŠ•èµ„åï¼Œxè½´ä¸Šæ–°çš„ã€Œè´¢å¯Œç°å€¼ã€ç‚¹å°†ï¼š",
            optionsEn: [
                "Shift left (closer to zero).",
                "Be exactly the same as the initial endowment.",
                "Shift right (higher value).",
                "Move onto the y-axis."
            ],
            optionsZh: [
                "å‘å·¦ç§»åŠ¨ï¼ˆæ›´æ¥è¿‘é›¶ï¼‰ã€‚",
                "ä¸åˆå§‹ç¦€èµ‹å®Œå…¨ç›¸åŒã€‚",
                "å‘å³ç§»åŠ¨ï¼ˆä»·å€¼æ›´é«˜ï¼‰ã€‚",
                "ç§»åŠ¨åˆ°yè½´ä¸Šã€‚"
            ],
            correct: 2,
            expEn: "By investing in positive NPV projects, the firm pushes its wealth line outward. The x-intercept of the Capital Market Line (which represents the Present Value of maximum wealth) shifts to the right, indicating an absolute increase in shareholder wealth.",
            expZh: "é€šè¿‡æŠ•èµ„äºæ­£ NPV é¡¹ç›®ï¼Œä¼ä¸šå°†å…¶è´¢å¯Œçº¿å‘å¤–æ¨ç§»ã€‚èµ„æœ¬å¸‚åœºçº¿åœ¨xè½´ä¸Šçš„æˆªè·ï¼ˆä»£è¡¨æœ€å¤§è´¢å¯Œçš„ç°å€¼ï¼‰å‘å³ç§»åŠ¨ï¼Œè¡¨æ˜è‚¡ä¸œè´¢å¯Œå®ç°äº†ç»å¯¹å¢åŠ ã€‚",
            attrEn: "Graphical Interpretation Error. The x-intercept of the market line represents total Present Value. Optimal investment shifts this intercept to the right (wealth creation).",
            attrZh: "å›¾è¡¨è§£è¯»é”™è¯¯ã€‚å¸‚åœºçº¿åœ¨xè½´çš„æˆªè·ä»£è¡¨æ€»ç°å€¼ã€‚æœ€ä¼˜æŠ•èµ„å°†æ­¤æˆªè·å‘å³æ¨ç§»ï¼ˆå³è´¢å¯Œåˆ›é€ ï¼‰ã€‚"
        },
        {
            id: 10,
            qEn: "Why is the Capital Market Line represented as a straight line in the Fisher Separation model?",
            qZh: "åœ¨è´¹é›ªåˆ†ç¦»æ¨¡å‹ä¸­ï¼Œä¸ºä»€ä¹ˆèµ„æœ¬å¸‚åœºçº¿è¢«è¡¨ç¤ºä¸ºä¸€æ¡ç›´çº¿ï¼Ÿ",
            optionsEn: [
                "Because firm production exhibits constant returns to scale.",
                "Because perfect market assumption implies borrowing and lending use a single, constant rate regardless of amount.",
                "Because shareholders' indifference curves are linear.",
                "Because inflation is assumed to be zero."
            ],
            optionsZh: [
                "å› ä¸ºä¼ä¸šç”Ÿäº§å…·æœ‰è§„æ¨¡æŠ¥é…¬ä¸å˜çš„ç‰¹å¾ã€‚",
                "å› ä¸ºå®Œç¾å¸‚åœºçš„å‡è®¾æ„å‘³ç€ï¼šæ— è®ºé‡‘é¢å¤§å°ï¼Œå€Ÿæ¬¾å’Œè´·æ¬¾éƒ½ä½¿ç”¨å•ä¸€ä¸”æ’å®šçš„åˆ©ç‡ã€‚",
                "å› ä¸ºè‚¡ä¸œçš„æ— å·®å¼‚æ›²çº¿æ˜¯çº¿æ€§çš„ã€‚",
                "å› ä¸ºå‡è®¾é€šè´§è†¨èƒ€ä¸ºé›¶ã€‚"
            ],
            correct: 1,
            expEn: "The slope of the Capital Market Line is -(1+r). Because 'r' (the market interest rate) is constant for both borrowing and lending any amount in a perfect market, the line has a constant slope, making it perfectly straight.",
            expZh: "èµ„æœ¬å¸‚åœºçº¿çš„æ–œç‡ä¸º -(1+r)ã€‚å› ä¸ºåœ¨å®Œç¾å¸‚åœºä¸­ï¼Œæ— è®ºå€Ÿè´·é‡‘é¢å¤šå¤§ï¼Œ'r'ï¼ˆå¸‚åœºåˆ©ç‡ï¼‰éƒ½æ˜¯æ’å®šçš„ï¼Œå› æ­¤è¯¥çº¿å…·æœ‰æ’å®šçš„æ–œç‡ï¼Œå‘ˆç°ä¸ºä¸€æ¡å®Œç¾çš„ç›´çº¿ã€‚",
            attrEn: "Mathematical/Graphical Error. The straightness of the line is the geometric representation of the 'constant borrowing/lending rate' assumption.",
            attrZh: "æ•°ç†å›¾å½¢é”™è¯¯ã€‚çº¿æ¡çš„ç¬”ç›´ï¼Œæ­£æ˜¯ã€Œå€Ÿè´·åˆ©ç‡æ’å®šã€è¿™ä¸€ç†è®ºå‡è®¾åœ¨å‡ ä½•ä¸Šçš„è¡¨ç°ã€‚"
        }
    ];

    function renderQuiz() {
        const container = document.getElementById('questions-container');
        quizData.forEach((q, index) => {
            const card = document.createElement('div');
            card.className = 'question-card';
            
            const qEn = `<div class="question-text en">${index + 1}. ${q.qEn}</div>`;
            const qZh = `<div class="question-text zh">${index + 1}. ${q.qZh}</div>`;
            
            let optionsHTML = '<ul class="options-list">';
            for(let i=0; i<4; i++) {
                optionsHTML += `
                    <li>
                        <label>
                            <input type="radio" name="q${index}" value="${i}">
                            <span class="en">${q.optionsEn[i]}</span>
                            <span class="zh">${q.optionsZh[i]}</span>
                        </label>
                    </li>
                `;
            }
            optionsHTML += '</ul>';

            card.innerHTML = qEn + qZh + optionsHTML;
            container.appendChild(card);
        });
    }

    function submitQuiz() {
        let score = 0;
        let mistakeHTML = '';
        let allAnswered = true;

        for(let i = 0; i < quizData.length; i++) {
            if (!document.querySelector(`input[name="q${i}"]:checked`)) {
                allAnswered = false;
                break;
            }
        }

        if (!allAnswered) {
            const isEng = document.body.classList.contains('lang-en');
            alert(isEng? "Please answer all questions before submitting." : "è¯·å›ç­”æ‰€æœ‰é—®é¢˜åå†æäº¤ã€‚");
            return;
        }
        
        quizData.forEach((q, index) => {
            const selected = document.querySelector(`input[name="q${index}"]:checked`);
            
            if (selected && parseInt(selected.value) === q.correct) {
                score++;
            } else {
                let userChoiceTextEn = selected? q.optionsEn[selected.value] : "None";
                let userChoiceTextZh = selected? q.optionsZh[selected.value] : "æœªé€‰æ‹©";
                let correctTextEn = q.optionsEn[q.correct];
                let correctTextZh = q.optionsZh[q.correct];

                mistakeHTML += `
                    <div class="mistake-card">
                        <div class="question-text en">Q${index + 1}: ${q.qEn}</div>
                        <div class="question-text zh">Q${index + 1}: ${q.qZh}</div>
                        
                        <div style="margin-bottom: 12px; margin-top: 15px;">
                            <span class="en">âŒ <strong>Your Answer:</strong> <span class="wrong-ans-highlight">${userChoiceTextEn}</span></span>
                            <span class="zh">âŒ <strong>æ‚¨çš„ç­”æ¡ˆï¼š</strong> <span class="wrong-ans-highlight">${userChoiceTextZh}</span></span>
                        </div>
                        <div>
                            <span class="en">âœ… <strong>Correct Answer:</strong> <span class="correct-ans-highlight">${correctTextEn}</span></span>
                            <span class="zh">âœ… <strong>æ­£ç¡®ç­”æ¡ˆï¼š</strong> <span class="correct-ans-highlight">${correctTextZh}</span></span>
                        </div>

                        <div class="explanation-box">
                            <strong class="en">ğŸ‘¨â€ğŸ« Professor's Explanation:</strong> <span class="en">${q.expEn}</span>
                            <strong class="zh">ğŸ‘¨â€ğŸ« æ•™æˆç²¾è®²ï¼š</strong> <span class="zh">${q.expZh}</span>
                        </div>

                        <div class="attribution-box">
                            <strong class="en">ğŸ” Error Attribution Analysis:</strong> <span class="en">${q.attrEn}</span>
                            <strong class="zh">ğŸ” æ·±åº¦å½’å› åˆ†æï¼š</strong> <span class="zh">${q.attrZh}</span>
                        </div>
                    </div>
                `;
            }
        });

        document.getElementById('submitBtn').style.display = 'none';
        document.getElementById('submitBtnZh').style.display = 'none';

        document.getElementById('score-val-en').innerText = score;
        document.getElementById('score-val-zh').innerText = score;
        document.getElementById('results-container').style.display = 'block';

        if (score === 10) {
            document.getElementById('mistake-book-section').style.display = 'none';
            document.getElementById('perfect-score-section').style.display = 'block';
        } else {
            document.getElementById('mistake-book-section').style.display = 'block';
            document.getElementById('perfect-score-section').style.display = 'none';
            document.getElementById('mistakes-container').innerHTML = mistakeHTML;
        }

        setTimeout(() => {
            document.getElementById('results-container').scrollIntoView({ behavior: 'smooth' });
        }, 100);
    }

    function toggleLanguage() {
        const body = document.body;
        const btn = document.getElementById('langToggleBtn');
        
        if (body.classList.contains('lang-en')) {
            body.classList.remove('lang-en');
            body.classList.add('lang-zh');
            btn.innerText = 'Switch to English (åˆ‡æ¢è‡³è‹±æ–‡)';
        } else {
            body.classList.remove('lang-zh');
            body.classList.add('lang-en');
            btn.innerText = 'ç‚¹å‡»åˆ‡æ¢è‡³å…¨ä¸­æ–‡ (åˆ‡æ¢è‡³ä¸­æ–‡)';
        }
    }

    window.onload = renderQuiz;
</script>

</body>
</html>
